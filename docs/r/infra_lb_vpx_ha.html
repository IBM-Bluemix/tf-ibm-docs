<!-- begin _meta.erb -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="IBM Cloud Terraform documentation">
    <title>
        IBM Cloud
    </title>
    <link href="../stylesheets/normalize.css" rel="stylesheet" />
    <link href="../stylesheets/main.css" rel="stylesheet" />
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
</head>
<!-- end _meta.erb -->

<body>
<div class="container-fluid page-wrapper">
    		<div class="docs-sidebar col-md-2 hidden-print affix-top" role="complementary">
			<ul class="nav docs-sidenav">
				<li>
                </li>

				<li>
				<a href="/index.html"><h4>IBM Cloud Provider</h4></a>
                </li>

				<li>
				<a href="#">Infrastructure Data Sources</a>
                <ul class="nav nav-visible">
					<li>
					<a href="/d/cf_account.html">cf_account</a>
					</li>
					<li>
					<a href="/d/cf_org.html">cf_org</a>
					</li>
					<li>
					<a href="/d/cf_service_instance.html">cf_service_instance</a>
					</li>
					<li>
					<a href="/d/cf_service_key.html">cf_service_key</a>
					</li>
					<li>
					<a href="/d/cf_service_plan.html">cf_service_plan</a>
					</li>
					<li>
					<a href="/d/cf_space.html">cf_space</a>
					</li>
                	<li>
					<a href="/d/cs_cluster.html">cs_cluster</a>
					</li>
					<li>
					<a href="/d/cs_cluster_config.html">cs_cluster_config</a>
					</li>
					<li>
					<a href="/d/cs_worker.html">cs_worker</a>
					</li>
					<li>
					<a href="/d/infra_dns_domain.html">infra_dns_domain</a>
					</li>
					<li>
					<a href="/d/infra_image_template.html">infra_image_template</a>
					</li>			
					<li>
					<a href="/d/infra_ssh_key.html">infra_ssh_key</a>
					</li>
					<li>
					<a href="/d/infra_vlan.html">infra_vlan</a>
					</li>
				</ul>
				</li>

				<li>
				<a href="#">Infrastructure Resources</a>
                <ul class="nav nav-visible">
					<li>
					 <a href="/r/cf_service_instance.html">cf_service_instance</a>
					</li>
					<li>
					 <a href="/r/cf_service_key.html">cf_service_key</a>
					</li>
					<li>
					 <a href="/r/cs_cluster.html">cs_cluster</a>
					</li>
					<li>
					 <a href="/r/cs_cluster_bind_service.html">cs_cluster_bind_service</a>
					</li>
                	<li>
					 <a href="/r/infra_bare_metal.html">infra_bare_metal</a>
					</li>
					<li>
					 <a href="/r/infra_basic_monitor.html">infra_basic_monitor</a>
					</li>
					<li>
					 <a href="/r/infra_block_storage.html">infra_block_storage</a>
					</li>
					<li>
					 <a href="/r/infra_dns_domain.html">infra_dns_domain</a>
					</li>
					<li>
					<a href="/r/infra_dns_domain_record.html">infra_dns_domain_record</a>
					</li>
					<li>
                    <a href="/r/infra_file_storage.html">infra_file_storage</a>
                    </li>
					<li>
					 <a href="/r/infra_fw_hardware_dedicated.html">infra_fw_hardware_dedicated</a>
					</li>
					</li>
					<li>
					 <a href="/r/infra_fw_hardware_dedicated_rules.html">infra_fw_hardware_dedicated_rules</a>
					</li>
					<li>
					 <a href="/r/infra_global_ip.html">infra_global_ip</a>
					</li>
					<li>
					 <a href="/r/infra_lb_local.html">infra_lb_local</a>
					</li>
					<li>
					 <a href="/r/infra_lb_local_service.html">infra_lb_local_service</a>
					</li>
					<li>
					 <a href="/r/infra_lb_local_service_group.html">infra_lb_local_service_group</a>
					</li>
					<li>
					 <a href="/r/infra_lb_vpx.html">infra_lb_vpx</a>
					</li>
					<li>
					 <a href="/r/infra_lb_vpx_ha.html">infra_lb_vpx_ha</a>
					</li>
					<li>
					 <a href="/r/infra_lb_vpx_service.html">infra_lb_vpx_service</a>
					</li>
					<li>
					 <a href="/r/infra_lb_vpx_vip.html">infra_lb_local_vpx_vip</a>
					</li>
					<li>
					 <a href="/r/infra_objectstorage_account.html">infra_objectstorage_account</a>
					</li>
					<li>
					<a href="/r/infra_provisioning_hook.html">infra_provisioning_hook</a>
					</li>
					<li>
					 <a href="/r/infra_scale_group.html">infra_scale_group</a>
					</li>
					<li>
					 <a href="/r/infra_scale_policy.html">infra_scale_policy</a>
					</li>
					<li>
					<a href="/r/infra_security_certificate.html">infra_security_certificate</a>
					</li>
					<li>
					<a href="/r/infra_ssh_key.html">infra_ssh_key</a>
					</li>
					<li>
					<a href="/r/infra_user.html">infra_user</a>
					</li>
					<li>
					 <a href="/r/infra_virtual_guest.html">infra_virtual_guest</a>
					</li>
					<li>
					 <a href="/r/infra_vlan.html">infra_vlan</a>
					</li>

				</ul>
				</li>
			</ul>
		</div>


    <div class="col-md-10 grid-md-10">
        <div class="content">
            <h1 id="ibmcloud_infra_lb_vpx_ha">ibmcloud_infra_lb_vpx_ha</h1>

<p>Configure a high availability pair with two NetScaler VPX devices. The two NetScaler VPXs need to have a version 10.5 and be located in the same subnet. A primary NetScaler VPX provides load balancing services in active mode and a secondary NetScaler VPX provides the services when the primary NetScaler VPX fails. For additional details, please refer to  <a href="https://support.citrix.com/article/CTX116748">Citrix support docs</a> and <a href="http://knowledgelayer.softlayer.com/articles/netscaler-vpx-10-high-availability-setup">the KnowledgeLayer NetScaler docs</a>. </p>

<p><strong>NOTE</strong>: This resource only supports NetScaler VPX 10.5. The <a href="https://docs.citrix.com/en-us/netscaler/11/nitro-api.html">NITRO API</a> is used to configure HA. The NITRO API is only accessible in the Bluemix Infrastructure (SoftLayer) private network, so you need to be connected to the private network when running Terraform. You can also use the <a href="http://www.softlayer.com/VPN-Access">SSL VPN</a> to access a private network connection. </p>

<p>The two NetScaler VPXs use the same password in high availability mode. Once this resource is created, Terraform changes the password of the secondary NetScaler VPX to the password of the primary NetScaler VPX. If this resource is destroyed, Terraform will restore the password of the secondary NetScaler VPX. </p>

<h2 id="example-usage">Example Usage</h2>
<pre class="highlight plaintext"><code># Create a primary NetScaler VPX.
resource "ibmcloud_infra_lb_vpx" "test_pri" {
    datacenter = "lon02"
    speed = 10
    version = "10.5"
    plan = "Standard"
    ip_count = 2
}

# Create a secondary NetScaler VPX in the same subnets.
resource "ibmcloud_infra_lb_vpx" "test_sec" {
    datacenter = "lon02"
    speed = 10
    version = "10.5"
    plan = "Standard"
    ip_count = 2
    public_vlan_id = "${ibmcloud_infra_lb_vpx.test_pri.public_vlan_id}"
    private_vlan_id = "${ibmcloud_infra_lb_vpx.test_pri.private_vlan_id}"
    public_subnet = "${ibmcloud_infra_lb_vpx.test_pri.public_subnet}"
    private_subnet = "${ibmcloud_infra_lb_vpx.test_pri.private_subnet}"
}

# Configure high availability with the primary and secondary NetScaler VPXs
resource "ibmcloud_infra_lb_vpx_ha" "test_ha" {
    primary_id = "${ibmcloud_infra_lb_vpx.test_pri.id}"
    secondary_id = "${ibmcloud_infra_lb_vpx.test_sec.id}"
    stay_secondary = false
}
</code></pre>

<h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code class="prettyprint">primary_id</code> - (Required, string) The unique identifier of the primary NetScaler VPX.</li>
<li><code class="prettyprint">secondary_id</code> - (Required, string) The unique identifier of the secondary NetScaler VPX.</li>
<li><code class="prettyprint">stay_secondary</code> - (Optional, boolean) If this argument is set to <code class="prettyprint">true</code>, the secondary NetScaler VPX will not take over the service, even if the primary NetScaler VPX fails. For additional details, see the <a href="https://docs.citrix.com/en-us/netscaler/10-5/ns-system-wrapper-10-con/ns-nw-ha-intro-wrppr-con/ns-nw-ha-frcng-scndry-nd-sty-scndry-tsk.html">Citrix NetScaler docs</a> and the <a href="https://support.citrix.com/article/CTX116748">Citrix support docs</a>. Default value: <code class="prettyprint">false</code>.</li>
</ul>

<h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code class="prettyprint">id</code> - The unique identifier of the high availability NetScale VPX pair.</li>
</ul>

        </div>
    </div>
</div>
</body>
</html>
