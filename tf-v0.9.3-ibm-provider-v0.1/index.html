<!-- begin _meta.erb -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="IBM Cloud Terraform Provider documentation">
    <title>
      IBM Cloud Terraform Documentation
    </title>
    <link href="../stylesheets/normalize.css" rel="stylesheet" />
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="../stylesheets/main.css" rel="stylesheet" />
    <link href="../stylesheets/custom.css" rel="stylesheet" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
    <!-- these were in footer_scripts.html but need to load early or refactor -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </head>
  <!-- end _meta.erb -->

<body>
  <nav class="top-block navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/tf-ibm-docs/index.html">IBM Cloud Provider for Terraform&trade;</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="https://github.com/IBM-Bluemix/terraform/tree/provider/ibm-cloud">
            <i class="fa fa-lg fa-github"></i>GitHub</a>
        </li>
        <li>
          <a href="https://ibm-cloud-schematics.slack.com/signup">
            <i class="fa fa-lg fa-slack"></i>
            Slack</a>
        </li>
      </ul>
    </div>
    <!--/.nav-collapse -->
  </div>
</nav>

  <div class="container-fluid">
    <div class="row">
      <div id="sidebar-container" class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
  <div class="sidebar-content">
    <ul class="list-unstyled">
      <li>
        <label class="tree-toggle">
          <i class="fa fa-caret-down"></i>Infrastructure Data Sources</label>
        <ul class="list-unstyled tree">
          <!-- Kelner: Ugly hax :( -->
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_account.html">cf_account</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_org.html">cf_org</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_service_instance.html">cf_service_instance</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_service_key.html">cf_service_key</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_service_plan.html">cf_service_plan</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cf_space.html">cf_space</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cs_cluster.html">cs_cluster</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cs_cluster_config.html">cs_cluster_config</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/cs_worker.html">cs_worker</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/infra_dns_domain.html">infra_dns_domain</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/infra_image_template.html">infra_image_template</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/infra_ssh_key.html">infra_ssh_key</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/d/infra_vlan.html">infra_vlan</a>
                  </li>
        </ul>
      </li>

      <li>
        <label class="tree-toggle">
          <i class="fa fa-caret-down"></i>Infrastructure Resources</label>
        <ul class="list-unstyled tree">
          <!-- Kelner: Ugly hax :( -->
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/cf_service_instance.html">cf_service_instance</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/cf_service_key.html">cf_service_key</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/cs_cluster.html">cs_cluster</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/cs_cluster_bind_service.html">cs_cluster_bind_service</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_bare_metal.html">infra_bare_metal</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_basic_monitor.html">infra_basic_monitor</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_block_storage.html">infra_block_storage</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_dns_domain.html">infra_dns_domain</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_dns_domain_record.html">infra_dns_domain_record</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_file_storage.html">infra_file_storage</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_fw_hardware_dedicated.html">infra_fw_hardware_dedicated</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_fw_hardware_dedicated_rules.html">infra_fw_hardware_dedicated_rules</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_global_ip.html">infra_global_ip</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_local.html">infra_lb_local</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_local_service.html">infra_lb_local_service</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_local_service_group.html">infra_lb_local_service_group</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_vpx.html">infra_lb_vpx</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_vpx_ha.html">infra_lb_vpx_ha</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_vpx_service.html">infra_lb_vpx_service</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_lb_vpx_vip.html">infra_lb_vpx_vip</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_objectstorage_account.html">infra_objectstorage_account</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_provisioning_hook.html">infra_provisioning_hook</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_scale_group.html">infra_scale_group</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_scale_policy.html">infra_scale_policy</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_security_certificate.html">infra_security_certificate</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_ssh_key.html">infra_ssh_key</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_user.html">infra_user</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_virtual_guest.html">infra_virtual_guest</a>
                  </li>
                  <li>
                    <a href="/tf-ibm-docs/tf-v0.9.3-ibm-provider-v0.1/r/infra_vlan.html">infra_vlan</a>
                  </li>
        </ul>
      </li>
    </ul>
  </div>
</div>

<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
  <span id="sidebar-tab" class="pull-left glyphicon glyphicon-chevron-left"></span>
</div>

      <div  id="content-container" class="content col-lg-10 col-md-9 col-sm-6 col-xs-12">
        <h1 id="ibm-cloud-provider">IBM Cloud Provider</h1>

<p>The IBM Cloud provider is used to manage IBM Cloud resources. The provider needs to be configured with the proper credentials before it can be used.</p>

<p>Use the navigation menu on the left to read about the available resources.</p>

<h2 id="documentation">Documentation</h2>

<p>The documentation presented here is the latest for the <a href="https://console.ng.bluemix.net/docs/services/schematics/index.html">IBM Cloud Schematics</a> service. At this time Schematics uses IBM internal version <code class="prettyprint">ibmcloud-v0.3-beta</code>. Newer versions may be available for use locally. Please see the available versions of the documentation below.</p>

<h3 id="versions">Versions</h3>

<!-- REPLACEME -->

<h2 id="developing-locally">Developing locally</h2>

<p>If you want to develop locally on your system, complete the following steps:</p>

<ol>
<li><p><a href="https://www.terraform.io/intro/getting-started/install.html">Download and install Terraform for your system. <i class="fa fa-external-link" alt="External link icon"></i></a></p></li>
<li><p><a href="https://github.com/IBM-Bluemix/terraform/releases">Download the Terraform binary for the IBM Cloud provider. <i class="fa fa-external-link" alt="External link icon"></i></a></p></li>
<li><p>Create a <code class="prettyprint">.terraformrc</code> file that points to the Terraform binary.</p>

<p>In the following example, <code class="prettyprint">/opt/provider/terraform-provider-ibmcloud</code> is the route to the directory.</p>
<pre class="highlight plaintext"><code>    # ~/.terraformrc
    providers {
        ibmcloud = "/opt/provider/terraform-provider-ibmcloud"
    }
</code></pre></li>
<li><p>Configure the plug-in provider and your IBM credentials to work with Terraform.</p>

<p>To provide your credentials as environment variables, you can use the following code in your <code class="prettyprint">.tf</code> file.</p>
<pre class="highlight plaintext"><code>    provider "ibmcloud" {
      bluemix_api_key    = "${var.ibmcloud_bmx_api_key}"
      softlayer_username = "${var.ibmcloud_sl_username}"
      softlayer_api_key  = "${var.ibmcloud_sl_api_key}"
    }
</code></pre>

<p>Be sure to also define these variables in your <code class="prettyprint">.tf</code> files:</p>
<pre class="highlight plaintext"><code>    variable ibmcloud_bmx_api_key {}
    variable ibmcloud_sl_username {}
    variable ibmcloud_sl_api_key {}
</code></pre>

<p>You can then export your credentials in your terminal, where <code class="prettyprint">$VALUE</code> is your credential.</p>
<pre class="highlight shell"><code>    <span class="nb">export </span><span class="nv">TF_VAR_ibmcloud_bmx_api_key</span><span class="o">=</span><span class="s2">"</span><span class="nv">$VALUE</span><span class="s2">"</span>
    <span class="nb">export </span><span class="nv">ibmid_ibmcloud_sl_username</span><span class="o">=</span><span class="s2">"</span><span class="nv">$VALUE</span><span class="s2">"</span>
    <span class="nb">export </span><span class="nv">TF_VAR_bmcloud_sl_api_key</span><span class="o">=</span><span class="s2">"</span><span class="nv">$VALUE</span><span class="s2">"</span>
</code></pre></li>
</ol>

<h2 id="example-usage">Example Usage</h2>

<p>Here is an example that sets up the following resources:</p>

<ul>
<li>An SSH key.</li>
<li>A virtual server that uses an existing SSH key.</li>
<li>A virtual server that uses an existing SSH key and a Terraform-managed SSH key (created as <code class="prettyprint">test_key_1</code> in the example below).</li>
</ul>

<p>Add the following code to a file called <code class="prettyprint">sl.tf</code> and run the <code class="prettyprint">terraform</code> command from the same directory:</p>
<pre class="highlight plaintext"><code># Configure the IBM Cloud Provider
provider "ibmcloud" {
    ibmid = "${var.ibmcloud_bmx_user}"
    ibmid_password = "${var.ibmcloud_bmx_pass}"
}

# Create an SSH key. The SSH key surfaces in the SoftLayer console under Devices &gt; Manage &gt; SSH Keys.
resource "ibmcloud_infra_ssh_key" "test_key_1" {
    label = "test_key_1"
    public_key = "${file(\"~/.ssh/id_rsa_test_key_1.pub\")}"
    # Windows example:
    # public_key = "${file(\"C:\ssh\keys\path\id_rsa_test_key_1.pub\")}"
}

# Virtual server created with existing SSH key in SoftLayer \
# Inventory not created using this Terraform template.
resource "ibmcloud_infra_virtual_guest" "my_server_1" {
    hostname = "host-a.example.com"
    domain = "example.com"
    ssh_key_ids = [123456]
    os_reference_code = "DEBIAN_7_64"
    datacenter = "ams01"
    network_speed = 10
    cores = 1
    memory = 1024
}

# Virtual server created with both previously-existing and \
# Terraform-managed resources.
resource "ibmcloud_infra_virtual_guest" "my_server_2" {
    hostname = "host-b.example.com"
    domain = "example.com"
    ssh_keys = [123456, "${ibmcloud_infra_ssh_key.test_key_1.id}"]
    os_reference_code = "CENTOS_6_64"
    datacenter = "ams01"
    network_speed = 10
    cores = 1
    memory = 1024
}
</code></pre>

<h2 id="authentication">Authentication</h2>

<p>The IBM Cloud provider offers a flexible means of providing credentials for authentication. The following methods are supported, in this order, and explained below:</p>

<ul>
<li>Static credentials</li>
<li>Environment variables</li>
</ul>

<h3 id="static-credentials">Static credentials</h3>

<p>Static credentials can be provided by adding an <code class="prettyprint">ibmid</code> and <code class="prettyprint">ibmid_password</code> in-line in the IBM Cloud provider block:</p>

<p>Usage:</p>
<pre class="highlight plaintext"><code>provider "ibmcloud" {
    ibmid = ""
    ibmid_password = ""
}
</code></pre>

<h3 id="environment-variables">Environment variables</h3>

<p>You can provide your credentials via the <code class="prettyprint">IBMID</code> and <code class="prettyprint">IBMID_PASSWORD</code> environment variables, representing your IBM ID, IBM ID password respectively.  </p>
<pre class="highlight plaintext"><code>provider "ibmcloud" {}
</code></pre>

<p>Usage:</p>
<pre class="highlight plaintext"><code>$ export IBMID="ibmid"
$ export IBMID_PASSWORD="password"
$ terraform plan
</code></pre>

<h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported in the <code class="prettyprint">provider</code> block:</p>

<ul>
<li><p><code class="prettyprint">ibmid</code> - (Optional) The IBM ID used to log into IBM services and applications. The IBM ID must be provided, but it can also be sourced from the <code class="prettyprint">IBMID</code> environment variable.</p></li>
<li><p><code class="prettyprint">ibmid_password</code> - (Optional) The password for the IBM ID. The password must be provided, but it can also be sourced from the <code class="prettyprint">IBMID_PASSWORD</code> environment variable.</p></li>
<li><p><code class="prettyprint">region</code> - (Optional) The Bluemix region. It can also be sourced from the <code class="prettyprint">BM_REGION</code> or <code class="prettyprint">BLUEMIX_REGION</code> environment variable. The former variable has higher precedence. Default value: <code class="prettyprint">us-south</code>.</p></li>
<li><p><code class="prettyprint">softlayer_timeout</code> - (Optional) The timeout, expressed in seconds, for the SoftLayer API. It can also be sourced from the <code class="prettyprint">SL_TIMEOUT</code>  or <code class="prettyprint">SOFTLAYER_TIMEOUT</code> environment variable. The former variable has higher precedence. Default value: <code class="prettyprint">60</code>.</p></li>
<li><p><code class="prettyprint">bluemix_timeout</code> - (Optional) The timeout, expressed in seconds, for the Bluemix API. It can also be sourced from the <code class="prettyprint">BM_TIMEOUT</code>  or <code class="prettyprint">BLUEMIX_TIMEOUT</code> environment variable. The former variable has higher precedence. Default value: <code class="prettyprint">60</code>.</p></li>
<li><p><code class="prettyprint">softlayer_account_number</code> - (Optional) The SoftLayer account number. It can also be sourced from the <code class="prettyprint">SL_ACCOUNT_NUMBER</code>  or <code class="prettyprint">SOFTLAYER_ACCOUNT_NUMBER</code> environment variable. The former variable has higher precedence.
Currently, the provider accepts only account numbers for which 2FA is not enabled.
If the account number is not provided, the provider works with the default SoftLayer account number and resources are created with the same default account.</p></li>
</ul>

      </div>
    </div>
  </div>
  <footer class="site-footer">
  <div class="container">
    <div class="col-md-9">
      <ul class="list-inline social-list">
        <li>
          <a href="https://github.com/IBM-Bluemix/terraform/tree/provider/ibm-cloud">
            <i class="fa fa-lg fa-github"></i>
            GitHub</a>
        </li>
        <li>
          <a href="https://ibm-cloud-schematics.slack.com/signup">
            <i class="fa fa-lg fa-slack"></i>
            Slack</a>
        </li>
      </ul>
    </div>
    <div class="col-md-3">
      IBM Cloud Provider for Terraform&trade;
    </div>
  </div>
</footer>

  <script src="../javascript/sidemenu.js"></script>
</body>
</html>
