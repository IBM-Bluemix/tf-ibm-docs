<!-- begin _meta.erb -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="IBM Cloud Terraform Provider documentation">
    <title>
      IBM Cloud Terraform Documentation
    </title>
    <link href="../../stylesheets/normalize.css" rel="stylesheet" />
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link href="../../stylesheets/main.css" rel="stylesheet" />
    <link href="../../stylesheets/custom.css" rel="stylesheet" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
    <!-- these were in footer_scripts.html but need to load early or refactor -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </head>
  <!-- end _meta.erb -->

<body>
  
<nav class="top-block navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/tf-ibm-docs/index.html">IBM Cloud Provider for Terraform&trade;</a>
      <i class="navbar-brand version-header">
        VERSION: v0.4.0
      </i>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="https://github.com/IBM-Bluemix/terraform-provider-ibm">
            <i class="fa fa-lg fa-github"></i>GitHub</a>
        </li>
        <li>
          <a href="https://ibm-cloud-schematics.slack.com/signup">
            <i class="fa fa-lg fa-slack"></i>
            Slack</a>
        </li>
      </ul>
    </div>
    <!--/.nav-collapse -->
  </div>
</nav>

  <div class="container-fluid">
    <div class="row">
      
<div id="sidebar-container" class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
  <div class="sidebar-content">
    <ul class="list-unstyled">
        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Cloud Foundry Data Sources
          </label>
          <ul class="list-unstyled tree">
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/account.html">account</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/app.html">app</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/app_domain_private.html">app_domain_private</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/app_domain_shared.html">app_domain_shared</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/app_route.html">app_route</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/org.html">org</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/service_instance.html">service_instance</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/service_key.html">service_key</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/service_plan.html">service_plan</a>
            </li>
            <li>
              <a href="/tf-ibm-docs/v0.4.0/d/space.html">space</a>
            </li>
          </ul>
        </li>

        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Container Data Sources
          </label>
          <ul class="list-unstyled tree">
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/container_cluster.html">container_cluster</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/container_cluster_config.html">container_cluster_config</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/container_cluster_worker.html">container_cluster_worker</a>
              </li>
          </ul>
        </li>

        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Infrastructure Data Sources
          </label>
          <ul class="list-unstyled tree">
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/compute_image_template.html">compute_image_template</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/compute_ssh_key.html">compute_ssh_key</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/compute_vm_instance.html">compute_vm_instance</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/dns_domain.html">dns_domain</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/d/network_vlan.html">network_vlan</a>
              </li>
          </ul>
        </li>

        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Cloud Foundry Resources
          </label>
          <ul class="list-unstyled tree">
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/app.html">app</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/app_domain_private.html">app_domain_private</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/app_domain_shared.html">app_domain_shared</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/app_route.html">app_route</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/service_instance.html">service_instance</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/service_key.html">service_key</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/space.html">space</a>
              </li>
          </ul>
        </li>

        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Container Resources
          </label>
          <ul class="list-unstyled tree">
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/container_bind_service.html">container_bind_service</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/container_cluster.html">container_cluster</a>
              </li>
          </ul>
        </li>

        <li>
          <label class="tree-toggle">
            <i class="fa fa-caret-down"></i>
            Infrastructure Resources
          </label>
          <ul class="list-unstyled tree">
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_autoscale_group.html">compute_autoscale_group</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_autoscale_policy.html">compute_autoscale_policy</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_bare_metal.html">compute_bare_metal</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_monitor.html">compute_monitor</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_provisioning_hook.html">compute_provisioning_hook</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_ssh_key.html">compute_ssh_key</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_ssl_certificate.html">compute_ssl_certificate</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_user.html">compute_user</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/compute_vm_instance.html">compute_vm_instance</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/dns_domain.html">dns_domain</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/dns_record.html">dns_record</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/firewall.html">firewall</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/firewall_policy.html">firewall_policy</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb.html">lb</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_service.html">lb_service</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_service_group.html">lb_service_group</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_vpx.html">lb_vpx</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_vpx_ha.html">lb_vpx_ha</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_vpx_service.html">lb_vpx_service</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/lb_vpx_vip.html">lb_vpx_vip</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/network_public_ip.html">network_public_ip</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/network_vlan.html">network_vlan</a>
              </li>
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/object_storage_account.html">object_storage_account</a>
              </li>    
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/storage_block.html">storage_block</a>
              </li>                        
              <li>
                <a href="/tf-ibm-docs/v0.4.0/r/storage_file.html">storage_file</a>
              </li>
          </ul>
        </li>

    </ul>
  </div>
</div>

<div class="col-lg-1 col-md-1 col-sm-1 col-xs-1">
  <span id="sidebar-tab" class="pull-left glyphicon glyphicon-chevron-left"></span>
</div>

      <div  id="content-container" class="content col-lg-10 col-md-9 col-sm-6 col-xs-12">
        <h1 id="ibm_lb_vpx_vip">ibm_lb_vpx_vip</h1>

<p>Create, update, and delete a VPX load balancer virtual IP address.</p>

<p><strong>NOTE</strong>: If NetScaler VPX 10.5 is used, Terraform uses NetScaler&rsquo;s <a href="https://docs.citrix.com/en-us/netscaler/11/nitro-api.html">NITRO REST API</a>) to manage the resource. The NITRO API is only accessible in the Bluemix Infrastructure (SoftLayer) private network, so you need to be connected to the private network when running Terraform. You can also use the <a href="http://www.softlayer.com/VPN-Access">SSL VPN</a> to access a private network connection.</p>

<h2 id="example-usage">Example Usage</h2>

<p>The following configuration supports NetScaler VPX 10.1 and 10.5</p>
<pre class="highlight plaintext"><code>resource "ibm_lb_vpx_vip" "testacc_vip" {
    name = "test_load_balancer_vip"
    nad_controller_id = 1234567
    load_balancing_method = "lc"
    source_port = 80
    virtual_ip_address = "211.233.12.12"
    type = "HTTP"
}
</code></pre>

<p>NetScaler VPX 10.5 provides additional options for <code class="prettyprint">load_balancing_method</code> and <code class="prettyprint">persistence</code>. A private IP address can be used as a <code class="prettyprint">virtual_ip_address</code>.</p>
<pre class="highlight plaintext"><code>resource "ibm_lb_vpx_vip" "testacc_vip" {
    name = "test_load_balancer_vip"
    nad_controller_id = "1234567"
    load_balancing_method = "DESTINATIONIPHASH"
    persistence = "SOURCEIP"
    source_port = 80
    virtual_ip_address = "10.10.2.2"
    type = "HTTP"
}
</code></pre>

<p>NetScaler VPX 10.5 supports SSL offload. If <code class="prettyprint">type</code> is set to SSL and the <code class="prettyprint">security_certificate_id</code> is configured, the <code class="prettyprint">virtual_ip_address</code> provides <code class="prettyprint">HTTPS</code> protocol. The following examples describe an SSL-offload configuration.</p>
<pre class="highlight plaintext"><code># Create a NetScaler VPX 10.5
resource "ibm_lb_vpx" "test" {
    datacenter = "lon02"
    speed = 10
    version = "10.5"
    plan = "Standard"
    ip_count = 2
}

resource "ibm_lb_vpx_vip" "test_vip1" {
    name = "test_vip1"
    nad_controller_id = "${ibm_lb_vpx.test.id}"
    load_balancing_method = "rr"
    source_port = 443
# SSL type provides SSL offload
    type = "SSL"
    virtual_ip_address = "${ibm_lb_vpx.test.vip_pool[0]}"
# Use a security certificate in the SoftLayer portal
    security_certificate_id = 80347
}

resource "ibm_lb_vpx_service" "testacc_service1" {
  name = "test_load_balancer_service1"
  vip_id = "${ibm_lb_vpx_vip.test_vip1.id}"
# 10.6.218.166 should provides HTTP service with port 80
  destination_ip_address = "10.66.218.166"
  destination_port = 80
  weight = 100
  connection_limit = 4294967294
  health_check = "ICMP"
}
</code></pre>

<h2 id="argument-reference">Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code class="prettyprint">name</code> - (Required, string) The unique identifier for the VPX load balancer virtual IP address.</li>
<li><code class="prettyprint">nad_controller_id</code> - (Required, integer) The ID of the VPX load balancer that the virtual IP address is assigned to.</li>
<li><code class="prettyprint">load_balancing_method</code> - (Required, string) See the <a href="http://sldn.softlayer.com/reference/datatypes/SoftLayer_Network_LoadBalancer_VirtualIpAddress">Bluemix Infrastructure (SoftLayer) API docs</a> for available methods. If NetScaler VPX 10.5 is used, see the <a href="https://docs.citrix.com/en-us/netscaler/10-5/ns-tmg-wrapper-10-con/ns-lb-wrapper-con-10/ns-lb-customizing-lbalgorithms-wrapper-con.html">Citrix docs</a> for additional methods that can be used. </li>
<li><code class="prettyprint">persistence</code> - (Optional, string) Applies to NetScaler VPX 10.5 only. See the available persistence types in the <a href="https://docs.citrix.com/en-us/netscaler/10-5/ns-tmg-wrapper-10-con/ns-lb-wrapper-con-10/ns-lb-persistence-wrapper-con/ns-lb-persistence-about-con.html">Citrix docs</a>.<br></li>
<li><code class="prettyprint">virtual_ip_address</code> - (Required, string) The public facing IP address for the VPX load balancer virtual IP.</li>
<li><code class="prettyprint">source_port</code> - (Required, integer) The source port for the VPX load balancer virtual IP address.</li>
<li><code class="prettyprint">type</code> - (Required, string) The connection type for the VPX load balancer virtual IP address. Accepted values are <code class="prettyprint">HTTP</code>, <code class="prettyprint">FTP</code>, <code class="prettyprint">TCP</code>, <code class="prettyprint">UDP</code>, <code class="prettyprint">DNS</code>, and <code class="prettyprint">SSL</code>. If SSL is configured, <code class="prettyprint">security_certificate_id</code> is used as certification for SSL offload services.</li>
<li><code class="prettyprint">security_certificate_id</code> - (Optional, integer) Applies to NetScaler VPX 10.5 only. Provides security certification for SSL offload. For additional information, see the  <a href="/v0.4.0/r/compute_ssl_certificate.html">ibm_compute_ssl_certificate</a> resource.</li>
</ul>

<h2 id="attributes-reference">Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code class="prettyprint">id</code> - The unique identifier of the VPX load balancer virtual IP.</li>
</ul>

      </div>
    </div>
  </div>
  <footer class="site-footer">
  <div class="container">
    <div class="col-md-9">
      <ul class="list-inline social-list">
        <li>
          <a href="https://github.com/IBM-Bluemix/terraform-provider-ibm">
            <i class="fa fa-lg fa-github"></i>
            GitHub</a>
        </li>
        <li>
          <a href="https://ibm-cloud-schematics.slack.com/signup">
            <i class="fa fa-lg fa-slack"></i>
            Slack</a>
        </li>
      </ul>
    </div>
    <div class="col-md-3">
      IBM Cloud Provider for Terraform&trade;
    </div>
  </div>
</footer>

  <script src="../../javascript/sidemenu.js"></script>
</body>
</html>
